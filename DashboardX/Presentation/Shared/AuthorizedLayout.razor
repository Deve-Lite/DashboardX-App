@inherits LayoutComponentBase
@inject AuthenticationStateProvider AuthenticationStateProvider

<MudLayout>
    <MudThemeProvider />
    <MudSnackbarProvider />

    <AuthorizeView Roles="user, admin">
        <Authorized>
            <MudAppBar Elevation="1" Dense="@true">
                <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@ToggleDrawer" />
                <MudSpacer />
            </MudAppBar>
            <MudDrawer @bind-Open="@open" ClipMode="DrawerClipMode.Docked" Elevation="1" Variant="@DrawerVariant.Responsive">
                <MudDrawerHeader>
                    <MudText Typo="Typo.h6">My App</MudText>
                </MudDrawerHeader>
                <MudNavMenu>
                    <MudNavLink Match="NavLinkMatch.All">Store</MudNavLink>
                    <MudNavLink Match="NavLinkMatch.All">Library</MudNavLink>
                    <MudNavLink Match="NavLinkMatch.All">Community</MudNavLink>
                </MudNavMenu>
            </MudDrawer>
            <MudMainContent>
                @Body
            </MudMainContent>
        </Authorized>
        <NotAuthorized>
            <MudContainer MaxWidth="MaxWidth.Small" Class="d-flex align-center" Style="height: 100vh;">
                @Body
            </MudContainer>
        </NotAuthorized>
    </AuthorizeView>
</MudLayout>
@code {

    bool open = false;

    void ToggleDrawer()
    {
        open = !open;
    }
}