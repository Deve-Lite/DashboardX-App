@using Presentation.Utils;
@inherits BaseControl

@inject IStringLocalizer<ButtonControl> _localizer;

<BaseControlView Client="@Client"
                 Device="@Device"
                 Control="@Control"
                 Icon="@Icon"
                 BackgroundColor="GetBackgroundColor"
                 BorderBackgroundColor="GetBorderBackgroundColor"
                 ActionAsync="Action">

</BaseControlView>

@code
{
    public static string Icon => @Icons.Material.Filled.Textsms;

    public Task Action()
    {
        var topic = Control!.GetTopic(Device!);

        var parameters = new DialogParameters<TextControlDialog> 
        {
            { x => x.Client, Client },
            { x => x.Device, Device },
            { x => x.Control, Control }
        };

        _dialogService.ShowAsync<TextControlDialog>(_localizer["Last Message"], parameters);

        return Task.CompletedTask;
    }
}

