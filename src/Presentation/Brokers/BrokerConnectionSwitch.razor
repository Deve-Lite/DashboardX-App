@inject IStringLocalizer<BrokerConnectionSwitch> _localizer

@if (Client!.IsConnected)
{
    <MudButton Variant="Variant.Filled"
               Color="Color.Success"
               OnClick="Client!.DisconnectAsync">
        @_localizer["Connected"]
    </MudButton>
}
else
{
    <MudButton Variant="Variant.Filled"
               OnClick="() => ConnectAsync(Client!)"
               Color="Color.Error">
        @_localizer["Disconnected"]
    </MudButton>
}

@code 
{

    [Parameter]
    public IClient? Client { get; set; }

    private async Task ConnectAsync(IClient client)
    {
        var result = await client.ConnectAsync();

        if (!result && result.ShowToast)
            _snackbar.Add(result.Messages.First(), Severity.Error);
    }
}
